# Aeroflot_Hackathon

http://localhost:8000 - основной бэкенд (Gunicorn + Celery)
http://localhost:8000/admin - админка Django
http://localhost:8000/api/ - API основного бэкенда
http://localhost:8001 - photo server (runserver)
http://localhost:8001/api/ - API photo server

### Хакатон с решением задачи идентификации ручных инструментов при ремонте оборудования (например самолета).

### В проекте 3 папки:

- backend - основной сервис AeroToolKit, который выполняет 3 функции:

        1.  демонстрация системы получения изображений по API от сервиса photo_server
        2.  обработка этих изображений ml моделями
        3.  презентация системы учета полученных и расшифрованных изображений

- dev_ml - приложения для обучения модели.

- photo_server - тестовый сервис для загрузки изображений, кодирования их, и отправки по API. Сервис имитирует работу стороннего ПО, способного создавать и отправлять изображения на основной сервер AeroToolKit.

# Подробнее про каждую из папок (описание, запуск)

...........тут backend...................

...........тут dev_ml....................

```bash
screwdriver_minus   —   отвертка_минус_1
screwdriver_plus   —   отвертка_плюс_2
screwdriver_torq    —   отвертка_на_смещенный_крест_3
brace   —   коловорот_4
locking_pliers   —  Пассатижи_контровочные_5
pliers   —   пассатижи_6
adjustable_pliers   —   шэрница_клещи_разводные_7
adjustable_wrench   —  Разводной_ключ_8
can_opener   —   Открывашка_для_банок_с_маслом_9
open-end_wrench   —   Ключ_рожковый_накидной_10
sidecutter   —   Бокорезы_11
```

.........................................

# Photo Server

Photo Server - это тестовый сервис, разработанный на Django, который выполняет ключевую задачу преобразования бинарных изображений в текстовый формат base64 с последующей отправкой на основной сервис AeroToolKit через REST API. Основная цель сервиса - это имитация работы стороннего программного обеспечения (такого как системы видеонаблюдения), которое способно автоматически передавать отдельные изображения на API основного сервиса AeroToolKit. Фреймворк Django, развернутый на сервере AeroToolKit, умеет быстро -"на лету"- проверять корректность base64 строк методами сериализаторов внутри получаемых JSON-объектов

### Принцип работы:

1.  пользователь загружает одно или несколько изображений через веб-интерфейс
2.  система автоматически конвертирует бинарные данные в текстовые строки
3.  при нажатии кнопки отправки подготовленные данные автоматически последовательно отправляются в виде JSON-объектов на API сервера AeroToolKit

Также предусмотрена проверка работоспособности Photo Server путем отправки json-объектов на проверочный сайт https://httpbin.org/post.

### Запуск без Docker (упрощенный способ)

Для запуска приложения на локальном сервере без установленного Docker требуется:

- **Python** версии не ниже 3.10 [установить](https://www.python.org/downloads/release/python-3100/)
- **Git Bash** (для Windows) [установить](https://git-scm.com/downloads) или терминал (Linux/Mac)
- В консоли Git Bash клонируйте репозиторий и перейдите в папку photo_server.
  Скопируйте содержимое файла с примерами переменных окружения в файл настроек
  (это последняя команда, которая создает .env)

```bash
git clone https://github.com/Alexman2505/Aeroflot_Hackathon.git
cd photo_server
cp .env.example .env
```

- Создайте и активируйте в папке photo_server виртуальное окружение:

```bash
cd photo_server
python -m venv venv
source venv/Scripts/activate

```

- Установите зависимости из файла requirements.txt:

```bash
python -m pip install --upgrade pip
pip install -r requirements.txt
```

- Перейдите в папку image_service и запустите в ней исполняемый файл:

```bash
cd image_service
python manage.py runserver

```

- Откройте в браузере

```
http://127.0.0.1:8000
```

### Запуск через Docker (Для production стадии внедрения проекта)

- В репозитории приложен Dockerfile. Вы можете собрать докер образ сами, если не доверяете приложенному архиву с образом photo-server.tar.

- В консоли Git Bash клонируйте репозиторий и перейдите в папку photo_server.
  Скопируйте содержимое файла с примерами переменных окружения в файл настроек
  (это последняя команда, которая создает .env)

```bash
git clone https://github.com/Alexman2505/Aeroflot_Hackathon.git
cd photo_server
cp .env.example .env
```

- Соберите Docker образ. Сборка может занять несколько минут

```bash
docker build -t photo-server .
```

- Запустите контейнер из собранного образа

```bash
docker run --rm -p 8000:8000 --name photo-server-container photo-server
```

- Откройте в браузере

```
http://127.0.0.1:8000
```
