# AeroToolKit - Система автоматизированного учета инструментов

## Описание проекта

AeroToolKit — это система автоматизированного учёта инструментов для технического обслуживания оборудования, построенная по клиент-серверной архитектуре. Такое решение обеспечивает централизованную обработку информации от множества клиентских приложений с чётким разделением функций между компонентами.

- **Photo Server** — отвечает исключительно за отправку изображений (имитация работы систем видеонаблюдения)
- **AeroToolKit Backend** — выполняет распознавание инструментов с помощью компьютерного зрения, учёт результатов и управление данными сотрудников

Система обеспечивает полный цикл обработки — от загрузки изображений до анализа результатов. В изолированной СУБД сохраняются данные сотрудников: ФИО, табельный номер, отдел и другие метаданные пользователей, загружающих фотографии.

Проект полностью построен на открытом программном обеспечении — все Python-библиотеки из requirements.txt загружены из официального репозитория PyPI.

## Архитектура проекта

### AeroToolKit Backend (`http://localhost:8000`)

Основной сервис системы, разработанный на Django, обрабатывает данные и управляет всей бизнес-логикой. Основные функции:

- **Прием и обработка изображений** через REST API от фотосервера. Реализована интерактивная документация API (Swagger)
- **Автоматическое распознавание инструментов** перед записью в базу с использованием ML-моделей YOLO
- **Хранение и учет результатов** в СУБД PostgreSQL с системой мониторинга активности сотрудников
- **Веб-интерфейс** для визуализации результатов и аналитики

### Photo Server (`http://localhost:8001`)

Тестовый сервис (клиент) имитирует работу систем видеонаблюдения. Основные функции:

- **Контроль доступа** — аутентификация сотрудников через секретные токены
- **Проверка данных** — двухэтапная валидация на стороне клиента и сервера
- **Настройка параметров** — возможность указать ожидаемое количество инструментов и требуемый уровень уверенности распознавания
- **Автоматическая отправка** — пакетная передача нескольких изображений за одну сессию на основной сервер AeroToolKit

### Сетевая инфраструктура

- **Изолированная Docker-сеть** — обеспечивает защищённое взаимодействие между сервисами AeroToolKit и Photo Server через стандартный сетевой мост
- **Автоматическая маршрутизация** — прозрачная связь между контейнерами с использованием доменных имён сервисов

## Быстрый запуск

### Запуск через Docker (рекомендуется)

```bash
# Клонирование репозитория
git clone https://github.com/Alexman2505/Aeroflot_Hackathon.git
cd Aeroflot_Hackathon

# Настройка переменных окружения (обязательно!)
cp backend/.env.example backend/.env
cp photo_server/.env.example photo_server/.env

# Запуск всех сервисов
docker-compose up --build -d
```

## Настройка переменных окружения

Перед первым запуском необходимо создать и настроить файлы `.env` в папках `backend/` и `photo_server/` на примере тестовых файлов .env.example лежащих в проекте. Команды на создание через консоль написаны выше

## Инструкция (документация) по использованию системы.

1. **Регистрация** — создайте учетную запись на основном сайте AeroToolKit: `http://localhost:8000`. После регистрации откроются дополнительные страницы сайта.
2. **Авторизация** — перейдите на сайт Photo Server (`http://localhost:8001`) и введите полученный логин/пароль, указанные при регистрации в AeroToolKit.
3. **Получение токена** — сервер Photo Server автоматически запросит и получит секретный токен доступа у основного сервера AeroToolKit. Сейчас для демонстрации работы системы этот токен отображается на главной странице Photo Server в формате <Token 123xxxx...>
4. **Загрузка изображений** — на странице Photo Server загрузите и отправьте фотографии инструментов. В демонстрационной версии система поддерживает обработку до 30 файлов за одну операцию. Для промышленной эксплуатации потребуется масштабирование сервиса с использованием Celery и Redis для обработки повышенных нагрузок.
5. **Просмотр результатов** — вернитесь на главную страницу AeroToolKit (`http://localhost:8000`) для просмотра обработанных изображений и результатов распознавания. Для проверки работы СУБД доступен просмотр всех записей сотрудников, а в административной панели сайта — расширенный поиск, сортировка и фильтрация данных по различным полям.
6. **Техническое примечание** — в текущей версии сервисы развернуты на Gunicorn с Whitenoise для обслуживания статических файлов. Конфигурация оптимизирована для разработки и работает в отладочном режиме (DEBUG=True).

## Технологический стек

### Backend & Infrastructure

- **Django Backend Architecture** - два независимых сервера с ORM, административной панелью и системой аутентификации
- **Server-Side Rendering** - генерация HTML на стороне сервера с Bootstrap стилизацией
- **REST API Development** - полнофункциональное API с токенной аутентификацией на Django REST Framework
- **Docker Containerization** - изолированная среда развертывания через Docker-контейнеры
- **Data Storage Infrastructure** - надежное хранение записей в изолированной в контейнере СУБД PostgreSQL
- **Performance Monitoring** - инструменты отладки с Django Debug Toolbar

### Data Processing & Integration

- **Base64 Image Processing** - преобразование бинарных данных в текстовый формат для безопасной передачи
- **Cross-Server Data Integration** - автоматизированный обмен данными между сервисами с JSON-форматированием
- **Computer Vision Integration** - автоматическое распознавание объектов моделью YOLO перед сохранением
- **Quality Control System** - гибкая настройка параметров распознавания и валидации результатов

### User Management & Analytics

- **User Management System** - система управления сотрудниками с индивидуальной аутентификацией
- **User Activity Dashboard** - отслеживание действий с фильтрацией по пользователям и детализацией загрузок в административной панели
- **Automated API Documentation** - интерактивная документация через Swagger/OpenAPI

## Структура проекта

```bash
Aeroflot_Hackathon/
├── backend/                          # Основной сервис AeroToolKit
│   ├── AeroToolKit/                  # Корневая папка проекта Django
│   │   ├── AeroToolKit/              # Папка с настройками проекта
│   │   │   ├── settings.py           # Настройки Django
│   │   │   ├── urls.py               # Маршрутизатор ссылок
│   │   │   └── wsgi.py               # WSGI конфигурация Django проекта (Web Server Gateway Interface)
│   │   ├── instruments/              # Приложение для работы с инструментами
│   │   │   ├── models.py             # Модели Instrument
│   │   │   ├── views.py              # Веб-представления
│   │   │   └── urls.py               # Маршрутизатор ссылок
│   │   ├── templates/                # HTML шаблоны
│   │   ├── api/                      # REST API приложение
│   │   │   ├── views.py              # ViewSets для инструментов
│   │   │   ├── serializers.py        # Сериализаторы
│   │   │   ├── urls.py               # Маршрутизатор ссылок
│   │   │   └── yolo_utils.py         # Утилиты для работы с YOLO моделью
│   │   ├── users/                    # Приложение пользователей
│   │   │   ├── models.py             # Модели пользователей
│   │   │   └── urls.py               # Маршрутизатор ссылок
│   │   ├── manage.py                 # Главный исполнительный файл
│   │   ├── requirements.txt          # Список используемых библиотек
│   │   └── .env                      # Переменные окружения
├── photo_server/                     # Сервис загрузки изображений
│   ├── image_service/                # Корневая папка проекта Django
│   │   ├── settings.py               # Настройки Django
│   │   ├── urls.py                   # Маршрутизатор ссылок
│   │   └── wsgi.py                   # WSGI конфигурация Django проекта (Web Server Gateway Interface)
│   ├── api/                          # API приложение
│   │   ├── views.py                  # Логика загрузки и отправки
│   │   ├── urls.py                   # Маршрутизатор ссылок
│   │   └── templates/                # HTML шаблоны
│   ├── manage.py                     # Главный исполнительный файл
│   ├── requirements.txt              # Список используемых библиотек.
│   └── .env                          # Переменные окружения
├── dev_ml/                           # Модуль машинного обучения
│   ├── datasets/                     # Датасеты для обучения
│   │   └── data.yaml
│   ├── models/                       # Обученные модели
│   │   └── yolo_best.pt
│   └── train_yolo.py                 # Обучение YOLO модели
├── docker-compose.yml                # Конфигурация Docker
├── .gitignore                        # Игнорируемые гитхабом файлы при публикации.
└── README.md
```
